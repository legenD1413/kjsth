<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>物流资讯详情 - 物流服务网站</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* 全局字体设置 */
        body, h1, h2, h3, h4, h5, h6, p, a, span, div, button {
            font-family: "Microsoft YaHei", "微软雅黑", sans-serif;
        }
        
        /* 资讯详情页面特定样式 */
        .news-detail-container {
            max-width: 900px;
            margin: 100px auto 40px;
            padding: 2rem;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-radius: 10px;
            min-height: calc(80vh - 110px);
        }
        
        .news-detail-header {
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .news-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin: 0 0 0.5rem 0;
            line-height: 1.3;
        }
        
        .news-meta {
            display: flex;
            align-items: center;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .news-date {
            display: flex;
            align-items: center;
            margin-right: 1.5rem;
        }
        
        .news-date i, .news-region i {
            margin-right: 0.5rem;
            color: #3498db;
        }
        
        .news-region {
            display: flex;
            align-items: center;
        }
        
        .news-importance {
            position: absolute;
            top: 0;
            right: 0;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .importance-normal {
            background-color: #f8f9fa;
            color: #7f8c8d;
            border: 1px solid #e9ecef;
        }
        
        .importance-important {
            background-color: #ebf5fb;
            color: #3498db;
            border: 1px solid #d6eaf8;
        }
        
        .importance-very_important {
            background-color: #fdedec;
            color: #e74c3c;
            border: 1px solid #f7d6d5;
        }
        
        .news-content {
            font-size: 1rem;
            line-height: 1.7;
            color: #333;
        }
        
        .news-content p {
            margin-bottom: 1.2rem;
        }
        
        .back-to-list {
            display: inline-block;
            margin-top: 2rem;
            padding: 0.5rem 1rem;
            background-color: #f8f9fa;
            color: #2c3e50;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .back-to-list i {
            margin-right: 0.5rem;
        }
        
        .back-to-list:hover {
            background-color: #e9ecef;
        }
        
        .news-loading {
            text-align: center;
            padding: 2rem;
            color: #7f8c8d;
        }
        
        .news-error {
            text-align: center;
            padding: 2rem;
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <header>
        <nav class="main-nav">
            <div class="logo">
                <img src="assets/images/logo.png" alt="物流服务网站Logo">
                <span>物流服务</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-globe-americas"></i>
                        区域
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="regions/north-america/index.html">北美</a></li>
                        <li><a href="regions/south-america/index.html">南美</a></li>
                        <li><a href="regions/europe/index.html">欧洲</a></li>
                        <li><a href="regions/australia/index.html">澳洲</a></li>
                        <li><a href="regions/middle-east/index.html">中东</a></li>
                        <li><a href="regions/southeast-asia/index.html">东南亚</a></li>
                        <li><a href="regions/africa/index.html">非洲</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-box"></i>
                        货品
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="products/regular/index.html">普货</a></li>
                        <li><a href="products/cosmetics/index.html">化妆品</a></li>
                        <li><a href="products/liquids/index.html">液体</a></li>
                        <li><a href="products/e-cigarettes/index.html">电子烟</a></li>
                        <li><a href="products/batteries/index.html">纯电池</a></li>
                        <li><a href="products/electronic-with-battery/index.html">内电</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-cube"></i>
                        货型
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="cargo-types/standard/index.html">标准件</a></li>
                        <li><a href="cargo-types/large/index.html">大件</a></li>
                        <li><a href="cargo-types/extra-large/index.html">超大件</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-map-marker-alt"></i>
                        地址
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="destinations/commercial/index.html">商业件</a></li>
                        <li><a href="destinations/residential/index.html">私人地址件</a></li>
                        <li><a href="destinations/fba/index.html">FBA</a></li>
                        <li><a href="destinations/walmart/index.html">沃尔玛</a></li>
                        <li><a href="destinations/overseas-warehouse/index.html">海外仓</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <div class="news-detail-container">
        <div id="news-content">
            <div class="news-loading">
                <i class="fas fa-spinner fa-spin"></i> 资讯加载中...
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 物流服务网站. All rights reserved.</p>
    </footer>

    <script>
        // 获取URL参数
        function getUrlParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        
        // 格式化资讯重要性标签
        function formatImportance(importance) {
            const labels = {
                'normal': '普通',
                'important': '重要',
                'very_important': '非常重要'
            };
            return labels[importance] || '普通';
        }
        
        // 获取地区显示名称
        function getRegionDisplayName(regionCode) {
            const regionNames = {
                'north-america': '北美',
                'middle-east': '中东',
                'europe': '欧洲',
                'asia': '亚洲',
                'australia': '澳洲',
                'africa': '非洲',
                'south-america': '南美',
                'global': '全球'
            };
            return regionNames[regionCode] || '全球';
        }
        
        // 加载资讯详情
        function loadNewsDetail() {
            const newsId = getUrlParam('id');
            const region = getUrlParam('region');
            const contentContainer = document.getElementById('news-content');
            
            if (!newsId || !region) {
                contentContainer.innerHTML = '<div class="news-error">资讯ID或地区参数缺失</div>';
                return;
            }
            
            // 尝试从本地存储获取数据
            try {
                const newsDataStr = localStorage.getItem('maigeeku_news_data');
                if (newsDataStr) {
                    const newsData = JSON.parse(newsDataStr);
                    if (newsData[region]) {
                        const newsItem = newsData[region].find(item => item.id.toString() === newsId.toString());
                        if (newsItem) {
                            displayNewsItem(newsItem, region);
                            return;
                        }
                    }
                }
            } catch (e) {
                console.error('从本地存储解析数据时出错:', e);
            }
            
            // 如果本地没有数据，从API获取
            const wordpressUrl = 'https://cms.kjsth.com';
            fetch(`${wordpressUrl}/wp-json/maigeeku/v1/news/${newsId}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('网络响应异常');
                    }
                    return response.json();
                })
                .then(newsItem => {
                    if (!newsItem) {
                        contentContainer.innerHTML = '<div class="news-error">未找到该资讯</div>';
                        return;
                    }
                    displayNewsItem(newsItem, region);
                })
                .catch(error => {
                    console.error('加载资讯详情失败:', error);
                    contentContainer.innerHTML = '<div class="news-error">加载资讯详情失败，请稍后再试</div>';
                });
        }
        
        // 显示资讯内容
        function displayNewsItem(newsItem, region) {
            document.title = `${newsItem.title} - 物流服务网站`;
            
            const contentContainer = document.getElementById('news-content');
            const regionName = getRegionDisplayName(region);
            
            contentContainer.innerHTML = `
                <div class="news-detail-header">
                    <h1 class="news-title">${newsItem.title}</h1>
                    <div class="news-meta">
                        <div class="news-date">
                            <i class="far fa-calendar-alt"></i>
                            <span>${newsItem.date}</span>
                        </div>
                        <div class="news-region">
                            <i class="fas fa-globe-asia"></i>
                            <span>${regionName}区域</span>
                        </div>
                    </div>
                    <div class="news-importance importance-${newsItem.importance}">
                        ${formatImportance(newsItem.importance)}
                    </div>
                </div>
                <div class="news-content">
                    <p>${newsItem.excerpt || '暂无内容'}</p>
                </div>
                <a href="javascript:history.back()" class="back-to-list">
                    <i class="fas fa-arrow-left"></i>返回资讯列表
                </a>
            `;
        }
        
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', loadNewsDetail);
    </script>
</body>
</html> 